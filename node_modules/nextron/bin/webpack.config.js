"use strict";var e=require("webpack"),t=require("fs"),n=require("path"),r=require("webpack-merge");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=o(e),s=o(t),u=o(n),c=o(r);const l=process.cwd(),d=require(u.default.join(l,"package.json")).dependencies,i=e=>{try{return s.default.accessSync(e,s.default.constants.F_OK),!0}catch(e){return!1}};const f=e=>{try{return s.default.accessSync(e,s.default.constants.F_OK),!0}catch(e){return!1}},j=process.cwd(),b=f(u.default.join(j,"tsconfig.json"))?".ts":".js";a.default((e=>{const{mainSrcDir:t,webpack:n}=(()=>{const e=u.default.join(j,"nextron.config.js");return f(e)?require(e):{}})(),r=c.default((e=>({mode:e,target:"electron-main",node:{__dirname:!1,__filename:!1},externals:[...Object.keys(d||{})],devtool:"source-map",resolve:{extensions:[".js",".jsx",".json",".ts",".tsx"],modules:[u.default.join(l,"app"),"node_modules"]},output:{libraryTarget:"commonjs2"},module:{rules:[{test:/\.(js|ts)x?$/,use:{loader:require.resolve("babel-loader"),options:{cacheDirectory:!0,extends:i(u.default.join(l,".babelrc"))?u.default.join(l,".babelrc"):i(u.default.join(l,".babelrc.js"))?u.default.join(l,".babelrc.js"):i(u.default.join(l,"babel.config.js"))?u.default.join(l,"babel.config.js"):u.default.join(__dirname,"../babel.js")}},exclude:[/node_modules/,u.default.join(l,"renderer")]}]},plugins:[new a.default.EnvironmentPlugin({NODE_ENV:e})]}))(e),{entry:{background:u.default.join(j,t||"main",`background${b}`)},output:{filename:"[name].js",path:u.default.join(j,"app")}}),o=n||{};return"function"==typeof o?o(r,e):c.default(r,o)})("production")).run(((e,t)=>{e&&console.error(e.stack||e),t&&t.hasErrors()&&console.error(t.toString())}));
